<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Group Project D3</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <nav>
    <button data-view="bar" class="active">ICC Trophies</button>
    <button data-view="scatter">Batting Averages</button>
    <button data-view="sankey">IPL Highest Scores</button>
    <button data-view="pie">IPL Runs by Team</button>
  </nav>

  <!-- Bar Chart Controls -->
  <div id="bar-controls" class="controls">
    <label for="trophyFilter">Show trophy:</label>
    <select id="trophyFilter">
      <option value="total">Total</option>
      <option value="odi_wc">ODI World Cups</option>
      <option value="t20_wc">T20 World Cups</option>
      <option value="champions_trophy">Champions Trophy</option>
      <option value="wts">World Test Series</option>
    </select>
  </div>

  <!-- Scatter Plot Controls -->
  <div id="scatter-controls" class="controls">
    <label>Show format:</label>
    <input type="checkbox" id="testChk" checked> <label for="testChk">Test</label>
    <input type="checkbox" id="odiChk" checked> <label for="odiChk">ODI</label>
  </div>

  <!-- Sankey Chart Controls -->
  <div id="sankey-controls" class="controls">
    <span>Hover over links to see score details.</span>
  </div>

  <!-- Pie Chart Controls -->
  <div id="pie-controls" class="controls">
    <span>Click a slice to isolate that teamâ€™s runs.</span>
  </div>

  <!-- SVG Canvases -->
  <svg id="bar" width="780" height="600"></svg>
  <svg id="scatter" width="780" height="600"></svg>
  <div id="scatter-legend"></div>
  <svg id="sankey" width="900" height="600"></svg>
  <div id="sankey-legend"></div>
  <svg id="pie" width="780" height="600"></svg>
  <div id="pie-legend"></div>

  <!-- Module Scripts -->
  <script type="module" src="js/bar.js"></script>
  <script type="module" src="js/scatter.js"></script>
  <script type="module" src="js/sankey.js"></script>
  <script type="module" src="js/pie.js"></script>

  <!-- View Toggle Logic -->
  <script>
    const views = ["bar", "scatter", "sankey", "pie"];
    document.querySelectorAll('nav button').forEach(btn => {
      btn.onclick = () => {
        const v = btn.dataset.view;
        views.forEach(view => {
          document.getElementById(view).style.display = view === v ? "" : "none";
          const ctrl = document.getElementById(view + "-controls");
          if (ctrl) ctrl.style.display = view === v ? "" : "none";
          // Hide/show legends based on view
          const legend = document.getElementById(view + "-legend");
          if (legend) legend.style.display = view === v ? "" : "none";
        });
        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
      };
    });
    window.addEventListener("DOMContentLoaded", () => {
      document.querySelector('button[data-view="bar"]').click();
    });
  </script>
</body>
</html>